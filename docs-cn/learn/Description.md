# Meeda的详细描述

Meeda的整个数据流程如下：

1. Layer2将blob数据发送给Meeda的Operator节点，Operator节点对数据进行冗余编码和分割之后，将其分散存储至Storage Nodes；
  
2. Operator节点同时生成数据的索引信息commitment，之后将commitment返回给Layer2以及上传至链上的验证合约进行保存，用户可以根据commitment获取相应的blob数据；
  
3. 链上的验证合约将会周期性根据VRF-Sampling生成一个随机种子，用于数据可用性抽样；
  
4. Storage Nodes根据随机种子持续性生成数据可用性承诺证明，用以响应数据可用性抽样；
  
5. Operator将从Storage Nodes接收到的证明聚合成一个固定大小的证明，并将聚合证明提交至链上的验证合约；
  
6. 链上的验证合约假定证明正确，不验证证明，仅保存证明，用户可以从链上访问历史证明信息；
  
7. Light Node负责监督聚合证明的正确性，在线下验证聚合证明，一旦发现错误，即可向验证合约发起挑战，验证合约才会验证聚合证明的正确性。
  

Meeda依赖于以太坊的安全性，使用链上验证、持续性证明以及冗余机制来提供高安全性的数据可用性保障。

## 链上验证

Meeda采用链上验证的方式，提供了更安全的数据可用性保障。

Meeda的链上验证包含两个主要组成部分，分别是数据可用性抽样以及欺诈证明。

### 数据可用性抽样

如果没有数据可用性抽样，那么Storage Nodes会针对每一份数据，都会生成一份数据可用性承诺证明，之后聚合。虽然这样也能保障数据可用性，但是会大大增加整体的计算量，进而提高Storage Nodes的部署成本。

Meeda的验证合约会根据VRF-Sampling定期生成一个随机种子seed，由seed确定抽样的样本。可验证随机函数（VRF）是一种随机数生成器（RNG），具有不可预测性、公平性、随机性以及防篡改性，VRF的结果是等概率且无法被预测的，因此抽样具有随机性。

Meeda的数据可用性抽样是一种自适应抽样方式。它对交易状态还未在结算层上最终确认的blob数据进行全量挑战，对另外的blob数据进行抽样挑战。这样既能完全保证交易状态未最终确认的blob数据的可用性，也能极大概率保证其他blob数据的可用性。

Storage Nodes根据seed以及存储的blob数据生成样本的可用性承诺证明，然后将证明发送给Operator。Operator会将这些证明聚合成一个固定大小的证明，并提交至验证合约。无论blob数据量有多大，聚合证明都是固定大小，不会随着blob数据量的增大而提高链上验证的成本。

这种抽样方式在提供高安全的数据可用性时，极大地降低了成本。

### 欺诈证明

如果将验证涉及的全部计算都放在链上进行，那么将会带来巨大的成本，因此，Meeda引入了欺诈证明（Fraud Proof），从而在提供高安全性的同时降低成本。

Light Node一旦发现提交至链上的聚合证明存在问题，就可以向验证合约提出质疑，从而发起挑战，合约将会对证明进行验证。如果挑战成功，Light Node将会获得奖励。如果没有Light Node提出质疑，那么验证合约将默认聚合证明是正确的。这种方式在提供高安全性的同时极大地降低了Meeda的成本。

## 持续性证明

Storage Nodes会根据验证合约定期生成的随机种子seed持续性生成数据可用性的承诺证明，并且会由Operator聚合之后提交至链上的验证合约。用户可以随时查看当前和以往的承诺证明，并且保障了用户随时都可以访问blob数据。

## 冗余机制

Meeda在接收Layer2的blob数据后，会对其进行冗余编码，之后会将其分散存储至Storage Nodes。

即使一部分Storage Nodes作恶，Meeda也能从其他Storage Nodes中恢复完整的blob数据。这种机制提供了更高安全的数据可用性保障。
