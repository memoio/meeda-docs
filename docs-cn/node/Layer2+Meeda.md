# Layer 2 与 Meeda

这里将简要介绍L2接入Meeda作为其数据可用性解决方案的可行性。

## L2概述

以Layer2中的Optimistic Rollup方案为例，简单概括L2：

1. 将OP链作为执行层，所有的交易都在该链上执行。因为OP链节点更优质（少而精），因此同步与执行的速度相比于L1链如以太坊会快得多。而本质上链的原理和结构与L1没有太大区别。
2. 但因为L2的节点少，因此其安全性或者说去中心化程度远远不及L1链。为了保证L2链上的交易安全，需要将L2链上的交易执行结果锚定到L1链上，以获取与L1链相同的安全性与可信度。而这个执行结果就是执行完交易后的状态根。
3. 虽然通过锚定到L1链上的L2状态根可以认为该L2状态已经被确认，不再可更改，但该L2根是否为有效且诚实的状态根仍不可知，恶意节点可以上传对自己有利的或篡改过的状态根。为了保证根的有效性，L2-OP采用fault-proof的方式，通过提交证明的方式惩罚恶意节点，奖励挑战节点。其中包括乐观假设（挑战周期内有节点做验证）、抽样验证（2D-RScode来提升验证效率）等其他细节不再赘述。
4. 最后的关键问题在于**数据可用性**。如果在L2上的交易数据被节点扣留，那即使有fault-proof的验证机制，也缺乏原始的交易数据用于验证和挑战欺诈行为。为了保证数据可得，OP的做法是将一大块的L2交易打包，最后提交一笔L1交易到L1链上，L2交易的数据此时都存放在L1交易的`calldata`字段内。这样既保证了数据副本在L1链上，任何节点都能获取到这些数据对L2做验证，而不存在数据扣留的问题；也避免了L1链的执行开销，因为这些`calldata`只是把数据上链，而不参与执行，这些数据对应的交易的真正执行是在L2链上。

## L2与Meeda

至此，OP方案作为Layer2的扩展方案，已经能够安全可靠的对Layer1进行扩展，提升吞吐量并降低交易费开销。但其仍存在一个问题：无法降低数据的同步开销和存储开销。原始的交易数据仍然需要提交到L1链上，L1上的全节点仍需要同步这些交易数据。即使有一些别的方案（如ERC-4337）来压缩部分交易数据，但效果仍旧有限。最直观的体现就是，这些交易数据存放在L1链上仍需要支付高昂的gas费用，尽管这些费用是字节费用而非执行费用。

究其根本，还是因为Layer2-OP将以太坊L1链当作自己的DA层（Data Availability，数据可用性）。而Meeda将数据放在链下存储，获取数据用的索引和保证数据可靠性的承诺证明放在链上存储。在保证了数据可用性的同时，也降低了链上的同步开销和存储开销，最大程度扩展区块链。且由于Meeda是独立出来的一层，外部接入只需要使用其`get`和`submit`的接口，而保证数据安全性则依靠Meeda层对应的挑战与验证机制，因此Meeda的接入也非常简洁高效，可以兼容任何的Layer2链。
